{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Actualizar Funcionario</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="card shadow-lg">
        <div class="card-header bg-primary text-white">
            <h4><i class="bi bi-pencil-square"></i> Actualizar Funcionario</h4>
        </div>
        <div class="card-body">

            <form method="post" action="">
                {% csrf_token %}

                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-person-fill"></i> Nombre</label>
                        <input type="text" name="nombre" value="{{ funcionario.nombre }}" class="form-control" required>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-person-fill"></i> Apellido</label>
                        <input type="text" name="apellido" value="{{ funcionario.apellido }}" class="form-control" required>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-credit-card-2-front-fill"></i> Cédula</label>
                        <input type="text" name="cedula" value="{{ funcionario.cedula }}" class="form-control" required>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-briefcase-fill"></i> Cargo</label>
                        <select name="cargo" id="cargo" class="form-select" required onchange="mostrarOtroCargo()">
                            <option value="">Seleccione un cargo</option>
                            <option value="Cajero" {% if funcionario.cargo == "Cajero" %}selected{% endif %}>Cajero</option>
                            <option value="Secretario" {% if funcionario.cargo == "Secretario" %}selected{% endif %}>Secretario</option>
                            <option value="Director de Carrera" {% if funcionario.cargo == "Director de Carrera" %}selected{% endif %}>Director de Carrera</option>
                            <option value="Técnico" {% if funcionario.cargo == "Técnico" %}selected{% endif %}>Técnico</option>
                            <option value="Asesor" {% if funcionario.cargo == "Asesor" %}selected{% endif %}>Asesor</option>
                            <option value="Otro" {% if funcionario.cargo not in "Cajero Secretario Director de Carrera Técnico Asesor" %}selected{% endif %}>Otro</option>
                        </select>
                        <input type="text" name="otro_cargo" id="otro_cargo" class="form-control mt-2" placeholder="Especifique el cargo" style="display:none;" value="{% if funcionario.cargo not in 'Cajero Secretario Director de Carrera Técnico Asesor' %}{{ funcionario.cargo }}{% endif %}">
                    </div>

                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-building"></i> Departamento</label>
                        <select name="departamento" id="departamento" class="form-select" required onchange="mostrarOtroDepartamento()">
                            <option value="">Seleccione un departamento</option>
                            <option value="Financiero" {% if funcionario.departamento == "Financiero" %}selected{% endif %}>Financiero</option>
                            <option value="TIC" {% if funcionario.departamento == "TIC" %}selected{% endif %}>TIC</option>
                            <option value="Investigacion" {% if funcionario.departamento == "Investigacion" %}selected{% endif %}>Investigacion</option>
                            <option value="RRHH" {% if funcionario.departamento == "RRHH" %}selected{% endif %}>RRHH</option>
                            <option value="Otro" {% if funcionario.departamento not in "Financiero TIC Investigacion RRHH" %}selected{% endif %}>Otro</option>
                        </select>
                        <input type="text" name="otro_departamento" id="otro_departamento" class="form-control mt-2" placeholder="Especifique el departamento" style="display:none;" value="{% if funcionario.departamento not in 'Financiero TIC Investigacion RRHH' %}{{ funcionario.departamento }}{% endif %}">
                    </div>

                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-calendar-event-fill"></i> Fecha de Ingreso</label>
                        <input type="date" name="fecha_ingreso" value="{{ funcionario.fecha_ingreso|date:'Y-m-d' }}" class="form-control" required>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-check-circle-fill"></i> Estado</label>
                        <select name="estado" class="form-select" required>
                            <option value="Activo" {% if funcionario.estado == "Activo" %}selected{% endif %}>Activo</option>
                            <option value="Inactivo" {% if funcionario.estado == "Inactivo" %}selected{% endif %}>Inactivo</option>
                        </select>
                    </div>

                    <div class="col-md-6">
                        <label class="form-label"><i class="bi bi-heart-fill"></i> Estado Civil</label>
                        <select name="estado_civil" class="form-select" required>
                            <option value="Soltero" {% if funcionario.estado_civil == "Soltero" %}selected{% endif %}>Soltero</option>
                            <option value="Casado" {% if funcionario.estado_civil == "Casado" %}selected{% endif %}>Casado</option>
                            <option value="Divorciado" {% if funcionario.estado_civil == "Divorciado" %}selected{% endif %}>Divorciado</option>
                            <option value="Viudo" {% if funcionario.estado_civil == "Viudo" %}selected{% endif %}>Viudo</option>
                        </select>
                    </div>

                    <div class="d-grid gap-2 mt-4">
                        <button type="submit" class="btn btn-success btn-lg">
                            <i class="bi bi-save-fill"></i> Guardar Cambios
                        </button>
                    </div>

                </div>
            </form>

        </div>
    </div>
</div>

<script>
function mostrarOtroCargo() {
    var cargo = document.getElementById("cargo").value;
    document.getElementById("otro_cargo").style.display = cargo === "Otro" ? "block" : "none";
}

function mostrarOtroDepartamento() {
    var departamento = document.getElementById("departamento").value;
    document.getElementById("otro_departamento").style.display = departamento === "Otro" ? "block" : "none";
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
